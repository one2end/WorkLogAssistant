# WorkLog Assistant - JavaScript版本

基于 Electron + Vue 的工作日志助手，用于自动监控和总结工作活动。

## 当前版本

**v0.2.0** - 新增浮窗、日志管理、多主题支持

## 功能特性

- 🖥️ **窗口监控**: 自动监控当前活动窗口的标题和进程名
- 📸 **截图功能**: 定时截取屏幕截图（可选）
- 🤖 **AI摘要**: 使用AI API自动生成工作活动摘要，支持自定义提示词
- 🎯 **系统托盘**: 最小化到系统托盘，不占用任务栏
- 🪟 **浮窗模式**: 最小化时显示悬浮窗，实时显示当前应用和持续时间
- 📊 **使用统计**: 显示应用使用时长和子活动次数排名
- � **历史记录**: 支持日历选择查看历史日期的活动数据
- 📥 **数据导出**: 支持导出指定日期的数据为JSON文件
- 🔄 **自动摘要**: 按配置的时间间隔自动生成工作摘要
- 🎨 **多主题**: 支持深色、浅色、海洋、森林、玫瑰5种主题
- 🔔 **开机自启动**: 支持开机自动启动
- 🔍 **自动更新**: 支持检查GitHub releases更新
- 📝 **日志记录**: 完整的应用日志记录功能

## 技术栈

- **Electron**: 跨平台桌面应用框架
- **Vue 3**: 现代化前端框架
- **Vite**: 快速的构建工具
- **Node.js**: 后端运行环境

## 安装步骤

### 1. 安装依赖

```bash
npm install
```

### 2. 配置API密钥

编辑 `config.json` 文件，设置您的API密钥：

```json
{
  "api": {
    "apiKey": "your-api-key-here",
    "baseUrl": "https://api.deepseek.com/chat/completions",
    "modelName": "deepseek-chat"
  }
}
```

### 3. 运行应用

#### 开发模式
```bash
npm run electron:dev
```

#### 构建应用
```bash
npm run electron:build
```

## 使用说明

### 启动监控

1. 打开应用主窗口
2. 点击"记录中/已暂停"按钮开始监控
3. 应用将自动监控活动窗口并记录数据

### 浮窗模式

- 点击最小化按钮时，应用会显示悬浮窗
- 浮窗显示当前正在使用的应用名称和持续时间
- 可在设置中开启/关闭浮窗功能
- 双击浮窗可恢复主窗口

### 生成摘要

1. 点击"摘要"标签页
2. 点击"生成摘要"按钮
3. 应用将根据最近的活动记录生成工作摘要
4. 支持自动摘要生成（可在设置中配置间隔）

### 日志查看

1. 点击"日志"标签页
2. 查看实时的活动记录和应用状态
3. 支持清除日志和打开日志文件夹

### 日期选择

- 使用日历组件选择查看历史日期
- 有数据的日期会有标记提示
- 支持"今天"按钮快速返回当天

### 数据导出

- 点击导出按钮可以导出指定日期的数据为JSON文件

### 系统托盘

应用最小化后会隐藏到系统托盘，可以通过以下方式操作：
- 双击托盘图标显示主窗口
- 右键点击托盘图标显示菜单

### 配置选项

在"设置"标签页中可以配置：
- 记录间隔（秒）
- 是否启用截图
- 截图间隔
- API密钥和端点
- 摘要生成参数（回溯时间、最大token数、压缩活动）
- 自定义AI提示词
- 开机自启动
- 浮窗显示
- 主题选择（深色/浅色/海洋/森林/玫瑰）

## 项目结构

```
WorkLogAssistant-JS/
├── electron/              # Electron主进程
│   ├── main.js           # 主进程入口
│   ├── windowMonitor.js  # 窗口监控
│   ├── screenshotManager.js # 截图管理
│   ├── summarizer.js     # AI摘要
│   ├── configManager.js  # 配置管理
│   ├── storageManager.js # 数据存储
│   ├── ocrManager.js     # OCR识别（开发中）
│   └── logManager.js    # 日志管理
├── src/                   # Vue前端
│   ├── App.vue          # 主组件
│   └── main.js          # 入口文件
├── public/              # 静态资源
├── build/               # 构建资源
├── Data/                # 数据目录（自动创建）
│   ├── activities.json  # 活动记录
│   ├── summaries.json   # 摘要记录
│   ├── summaries/       # Markdown摘要文件
│   ├── screenshots/     # 截图文件
│   ├── ocr/            # OCR结果
│   └── logs/           # 应用日志
├── package.json
├── vite.config.js
└── README.md
```

## 数据存储

所有数据存储在 `Data` 目录下：
- `activities.json`: 活动记录
- `summaries.json`: 摘要记录
- `summaries/`: Markdown格式的摘要文件
- `screenshots/`: 截图文件
- `ocr/`: OCR识别结果
- `logs/`: 应用日志文件

## 跨平台支持

应用支持以下平台：
- Windows
- macOS
- Linux

## 注意事项

1. 首次运行需要配置API密钥
2. 监控间隔建议设置为60秒或更长
3. 截图功能会占用较多存储空间
4. 建议定期清理旧数据
5. OCR功能正在开发中

## 故障排除

### 应用无法启动
- 检查Node.js版本（建议18+）
- 重新安装依赖：`npm install`

### 窗口监控不工作
- 检查系统权限
- 确认监控间隔设置合理

### AI摘要生成失败
- 检查API密钥是否正确
- 确认网络连接正常
- 检查API端点配置

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request！
